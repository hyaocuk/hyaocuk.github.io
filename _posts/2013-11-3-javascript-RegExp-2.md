---
layout: post
title: JavaScript RegExp 类型（2）
---

下面简单说一下`RegExp`每个实例的属性：

* `global`: 布尔值，表示是否设置了`g`标志。

* `ignoreCase`: 布尔值，表示是否设置了`i`标志。

* `lastIndex`: 整数，表示开始搜索下一个匹配项的字符位置，从0算起。

* `multiline`: 布尔值，表示是否设置了`m`标志。

* `source`: 正则表达式的字符串表示，按照字面量形式而非传入构造函数中的字符串模式返回。

<separator>

我个人认为这些`RegExp`实例的属性具体用处不大，不过了解一下也无妨，一起来看一下简单的例子：

{% gist 7289848 %}

我认为`RegExp`的重点应该在如何在知道模式的情况下，执行判断待匹配字符串的方法。
因此这里开始介绍`RegExp`主要的方法`exec()`和`test()`。

`exec()`方法式专门为捕获组设计的。`exec()`接受一个参数，即待匹配的字符串，然后返回包含第一个匹配项信息的数组；或者在没有匹配项的情况下返回`null`。返回的数组虽然是`Array`实例，但包含两个额外的属性：`index`和`input`。其中，`index`表示匹配项在字符串中的位置，而`input`表示应用正则表达式的字符串。在数组中，第一项是与整个模式匹配的字符串，其它项则是模式中捕获组匹配的字符串（如果模式中没有捕获组，那么该数组只包含一项）。

我们来看一个例子：

{% gist 7289978 %}

这个例子中的模式包含两个捕获组。最内部的捕获组匹配 " and baby" ，而包含它的捕获组匹配 " and dad" 或者 " and dad and baby" 。当把字符串传入`exec()`方法中之后，发现了一个匹配项。因为整个字符串本身与模式匹配，所以返回的数组`matches`的`index`属性值为0。数组中的第一项是匹配的整个字符串，第二项包含与第一个捕获组匹配的内容，第三项包含与第二个捕获组匹配的内容。

对于`exec()`方法而言，即使在模式中设置了全局标志`g`，它每次也只会返回一个匹配项。在不设置全局标志的情况下，在同一个字符串上多次调用`exec()`将始终返回第一个匹配项的信息。而在设置全局标志的情况下，每次调用`exec()`都会在字符串中继续查找新的匹配项，如下面的例子所示：

{% gist 7290199 %}

这个例子中的第一个模式 pattern1 不是全局模式，因此每次调用`exec()`返回的都是第一个匹配项 "cat"。而第二个模式`pattern2`是全局模式，因此每次调用`exec()`都会返回字符串的下一个匹配项，直至搜索到字符串的末尾为止。此外，还应该注意模式的`lastIndex`属性的变化情况。在全局匹配模式下，`lastIndex`的值在每次调用`exec()`后都会增加，而在非全局模式下则始终保持不变。

`test()`方法，它接受一个字符串参数。在模式与该参数匹配的情况下返回`true`，否则，返回`false`。在只想知道待匹配字符串与某个模式是否匹配，但不需要知道其文本内容的情况下，使用这个方法非常方便。我们看一下简单的例子：

{% gist 7290238 %}

待续……
